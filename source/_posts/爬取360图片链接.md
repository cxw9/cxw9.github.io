---
title: 爬取360图片链接
tags: 爬虫
categories: Python
keywords: 爬取360图片链接
description: 爬取360图片链接
cover: 'https://cdn.jsdelivr.net/gh/runrab/cdn2@master/img/min/acg/acg139.jpeg'
top_img: 'https://cdn.jsdelivr.net/gh/runrab/cdn2@master/img/mid/acg/acg139.jpeg'
swiper_index: 7
swiper_desc: 爬取360图片链接
abbrlink: 7399c5ba
date: 2021-07-05 17:47:24
updated:
comments:
toc:
toc_number:
copyright:
copyright_author:
copyright_author_href:
copyright_url:
copyright_info:
mathjax:
katex:
aplayer:
highlight_shrink:
aside:
swiper_cover:
---

# 爬取360图片链接

最后用了最简单的 写的有别的版本也有,但是这个最简单(还能简化,没做，我也不用这种方式)，也不会出错，更没有复杂的检查等。 要求： python3(python3自带sqlite3)

```python
# 商业转载请联系作者获得授权，非商业转载请注明出处。
# For commercial use, please contact the author for authorization. For non-commercial use, please indicate the source.
# 协议(License)：署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0)
# 作者(Author)：cxw9
# 链接(URL)：https://mikuo.top/82-2/
# 来源(Source)：MiKuo

# -*- coding: utf-8 -*-
import json
# 接口 http://wallpaper.apc.360.cn/index.php?c=WallPaper&a=getAppsByCategory&cid=【分类ID】&start=【0开始】&count=【加载数】&from=360chrome
# http://wallpaper.apc.360.cn/index.php?c=WallPaper&a=getAppsByCategory&cid=10&start=0&count=1&from=360chrome
import time
 
import requests
import sqlite3
 
 
def createTables():
    conn = sqlite3.connect('360img.db')
    # 创建游标
    cursor = conn.cursor()
    # 创建表
    sql = 'CREATE TABLE text10(mid integer PRIMARY KEY autoincrement, data TEXT)'
    cursor.execute(sql)
    # 提交事物
    conn.commit()
 
 
# createTables() #创建数据库时使用
 
def insertTables(d):
    conn = sqlite3.connect('360img.db')
    # 创建游标
    cursor = conn.cursor()
    # 插入数据
    sql1 = "INSERT INTO text10(data) VALUES('{}')"
    sql = sql1.format(str(d))
    cursor.execute(sql)
 
    # 提交事物
    conn.commit()
 
 
def conUrl():
    start = 0
    f1 = open("text10.txt", 'r', encoding="utf8")
    for index, line in enumerate(f1):
        start += 1
 
    payload = {'c': 'WallPaper', 'a': 'getAppsByCategory', 'cid': '10', 'start': start, 'count': '200',
               'from': '360chrome'}
    r = requests.get('http://wallpaper.apc.360.cn/index.php', params=payload)
    # 获取json的data字段
    jsData = r.json()['data']
    f = open("text10.txt", 'a+', encoding="utf8")
    for i in jsData:
        strS = str(i).replace('\'', '\"')  # 字符串转json
        dictJson = json.loads(strS)  # 字符串转字典
        # 字典获取所有 k,values
        strI = str(i) + '\n'
        if strI not in f.readline():
            f.write(str(i) + '\n')
            insertTables(strS)
 
conUrl() #用for循环先注释掉
'''
# 定时执行 暂时取消  用 循环执行
def timGo():
    count = 0
    for i in range(10):
        count += 1
        conUrl()
        print("执行次数" + str(count))
        time.sleep(10)
 
 
timGo()
'''

```

